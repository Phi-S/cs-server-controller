@using web.Helper
@inherits ServerDisplayCompRazor
@attribute [RenderModeInteractiveServer]

@if (ServerInfo == null)
{
    <LoadingComp/>
}
else
{
    <div class="container container-md @GetBackgroundColor() rounded" style="max-width: 35rem; height: 3rem; font-size: large">
        <div class="row h-100 align-items-center ps-1 pe-1">
            <div class="col-7 @HostnameMdCol text-start m-0 p-0 text-truncate">
                <span class="text-decoration-underline" title="@Hostname: @GetConnectionString()">
                    <strong>@Hostname</strong>
                </span>
            </div>

            @if (ServerInfo.ServerStarted)
            {
                <div class="col-2 d-none d-sm-block text-start m-0 p-0">
                    <span title="Player count: @ServerInfo.CurrentPlayerCount / @ServerInfo.MaxPlayerCount">@ServerInfo.CurrentPlayerCount / @ServerInfo.MaxPlayerCount</span>
                </div>

                <div class="col-2 d-none d-sm-block text-start m-0 p-0 text-truncate">
                    <span title="Current map: @ServerInfo.CurrentMap">@ServerInfo.CurrentMap</span>
                </div>
            }
            <div class="col-5 @ButtonsMdCol text-end m-0 p-0" style="font-size: x-large">
                <button class="border-0 bg-transparent bi bi-copy" title="Copy IP" @onclick="CopyConnectStringToClipboard"></button>
                <button class="border-0 bg-transparent bi bi-map" title="Change map" @onclick="OpenChangeMapComponent"></button>
                <button class="border-0 bg-transparent bi bi-file-earmark-post" title="Logs"></button>
                @if (ServerInfo.ServerStarted)
                {
                    <button class="border-0 bg-transparent bi-stop" title="Stop server" @onclick="StopServer"></button>
                }
                else if (ServerInfo.ServerStarting)
                {
                    <button class="border-0 bg-transparent">
                        <div class="spinner-grow" title="Loading" role="status" style="width: 1.3rem; height: 1.3rem">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </button>
                }
                else
                {
                    <button class="border-0 bg-transparent bi-play" title="Start server" @onclick="StartServer"></button>
                }
            </div>
        </div>
    </div>
}